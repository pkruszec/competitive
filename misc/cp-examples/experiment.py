subcommand = None
task = None
prog, *args = sys.argv

if args:
    subcommand, *args = args

if args:
    task, *args = args

if subcommand in {"-h", "-help", "--help", "help", "h"}:
    helptext = f"""Usage: {prog} <subcommand> [task]
Subcommands:
  help  (h)  Print the help.
  clean (c)  Delete common temporary files generated by the compiler from the work directory.
  build (b)  Compile [task] with the preferred compiler.
"""
    print(helptext)
    exit(0)

work_folder = os.getcwd()
logger.info(f"Work folder: {work_folder}")

if subcommand == "clean" or subcommand == "c":
    clean_folder(work_folder)
elif subcommand == "build" or subcommand == "b":
    if task is None:
        print("You have to provide what task you want to compile as the second argument.", file=sys.stderr)
        exit(1)

    clean_folder(work_folder)
    logger.info(build_file(f"{task}.cpp"))
elif subcommand is None:
    print(f"No subcommand passed. Pass --help for help.", file=sys.stderr)
    exit(1)
else:
    print(f"Unknown subcommand {subcommand!r} Pass --help for help.", file=sys.stderr)
    exit(1)
